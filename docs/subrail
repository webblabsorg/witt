

## Purchase Flow — What's needed to unblock

The [PurchaseFlowNotifier](cci:2://file:///Users/aa/Documents/Projects/witt/packages/witt_monetization/lib/src/providers/entitlement_provider.dart:102:0-156:1) stub is ready and waiting at `@/Users/aa/Documents/Projects/witt/packages/witt_monetization/lib/src/providers/entitlement_provider.dart#107-134`. The 3 method bodies ([purchase](cci:1://file:///Users/aa/Documents/Projects/witt/packages/witt_monetization/lib/src/providers/entitlement_provider.dart:106:2-133:3), [restore](cci:1://file:///Users/aa/Documents/Projects/witt/packages/witt_monetization/lib/src/providers/entitlement_provider.dart:135:2-142:3), [purchaseExam](cci:1://file:///Users/aa/Documents/Projects/witt/packages/witt_monetization/lib/src/providers/entitlement_provider.dart:144:2-153:3)) just need replacing with real Subrail SDK calls.

**Unblocking steps when Subrail SDK is ready:**
1. Populate [/Documents/Projects/subrail/](cci:9://file:///Users/aa/Documents/Projects/subrail:0:0-0:0) with the SDK
2. Add path dep to `@/Users/aa/Documents/Projects/witt/packages/witt_monetization/pubspec.yaml`
3. Replace the 3 simulated method bodies — signatures already match



---

## Remaining gaps summary

### Implementation gaps
- **None** (for Phase 3 scope).

### Pre-launch ops checks (non-code)
1. Ensure Subrail dashboard product IDs match app IDs:
   - `witt_premium_monthly`
   - `witt_premium_yearly`
   - `exam_<examId>`
2. Ensure `SUBRAIL_API_KEY` is set in each deployment env (`.env.dev/.env.staging/.env.prod`).